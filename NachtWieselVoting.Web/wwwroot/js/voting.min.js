function UpdateOptions(n,t){TotalCount=TotalCount-n.length+t.length;TotalCount<0&&(TotalCount=0);$('[signalr-tag="total"]').text(`Всего голосов: ${TotalCount}`);$('[signalr-updatable="true"]').each(function(){var r=parseInt($(this).attr("signalr-optionId")),i=parseInt($(this).attr("signalr-votedCount")),u;n.includes(r)&&(i=i-1);t.includes(r)&&(i=i+1);i<0&&(i=0);$(this).attr("signalr-votedCount",i);u=TotalCount==0?0:i/TotalCount*100;$(this).find("p > span").text(`(${i} голосов)`);$(this).find("div.progress").attr("aria-valuenow",i).attr("aria-valuemax",TotalCount);$(this).find("div.progress-bar").attr("style",`width: ${u}%`)})}$(function(){var n=(new signalR.HubConnectionBuilder).withUrl("/Votes/Live").build();n.on("Change",UpdateOptions);n.start().then(function(){n.invoke("Enter",VotingId).catch(function(n){return console.error(n.toString())})})});